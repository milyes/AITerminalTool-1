<!DOCTYPE html>
<html lang="fr" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AITerminal - Interface Web</title>
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    <style>
        .terminal-container {
            background-color: var(--bs-dark);
            border-radius: 8px;
            padding: 1.5rem;
            font-family: 'Courier New', monospace;
            color: var(--bs-light);
            min-height: 400px;
            position: relative;
            overflow-y: auto;
            margin-top: 1.5rem;
        }
        
        .terminal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--bs-secondary);
            padding-bottom: 0.5rem;
        }
        
        .terminal-dots {
            display: flex;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        .dot-red {
            background-color: #ff5f57;
        }
        
        .dot-yellow {
            background-color: #febc2e;
        }
        
        .dot-green {
            background-color: #28c840;
        }
        
        .terminal-title {
            color: var(--bs-light);
            font-size: 0.9rem;
        }
        
        .terminal-content {
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-bottom: 1rem;
        }
        
        .prompt-input {
            background-color: transparent;
            border: none;
            color: var(--bs-light);
            width: 100%;
            font-family: 'Courier New', monospace;
            outline: none;
        }
        
        .command-line {
            display: flex;
            align-items: center;
        }
        
        .prompt-symbol {
            color: var(--bs-success);
            margin-right: 0.5rem;
        }
        
        .response {
            color: var(--bs-info);
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .navbar-brand {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: var(--bs-info) !important;
        }
        
        .logo-highlight {
            color: var(--bs-primary);
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/"><span class="logo-highlight">AI</span>Terminal</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/">Accueil</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">À propos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/username/aiterminal" target="_blank">GitHub</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-5">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <h1 class="text-center mb-4"><span class="text-primary">AI</span>Terminal</h1>
                <p class="text-center mb-5">Un terminal intelligent en ligne de commande qui intègre des services d'IA, des fonctionnalités réseau et des capacités d'analyse internet.</p>

                <div class="terminal-container">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <div class="dot dot-red"></div>
                            <div class="dot dot-yellow"></div>
                            <div class="dot dot-green"></div>
                        </div>
                        <div class="terminal-title">AITerminal</div>
                        <div></div>
                    </div>
                    <div class="terminal-content" id="terminalContent">
<span class="text-primary">AITerminal v1.0</span> - Un terminal intelligent en ligne de commande.
Tapez <span class="text-warning">aide</span> pour afficher la liste des commandes disponibles.

</div>
                    <div class="command-line">
                        <span class="prompt-symbol">$</span>
                        <input type="text" class="prompt-input" id="promptInput" placeholder="Entrez une commande...">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container my-5" id="about">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <h2 class="mb-4">À propos d'AITerminal</h2>
                <p>AITerminal est un outil puissant pour interagir avec des services d'intelligence artificielle directement depuis votre terminal. Il vous permet de générer du contenu, d'analyser des textes, de rechercher des informations sur internet, de tester des connexions réseau et de surveiller les ressources système.</p>
                
                <h3 class="mt-4 mb-3">Fonctionnalités</h3>
                <ul class="list-group mb-4">
                    <li class="list-group-item">Services d'IA : Génération de texte, analyse de sentiment, résumés, extraction d'entités, génération de code</li>
                    <li class="list-group-item">Fonctionnalités réseau : Ping, requêtes HTTP</li>
                    <li class="list-group-item">Analyse internet : Recherche web, extraction de contenu</li>
                    <li class="list-group-item">Gestion système : Surveillance CPU, mémoire, disque et réseau</li>
                    <li class="list-group-item">Configuration facile : Via ligne de commande ou fichier JSON</li>
                </ul>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><span class="text-primary">AI</span>Terminal</h5>
                    <p>© 2025 AITerminal. Tous droits réservés.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p>Créé avec <span class="text-danger">❤</span> par Replit</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const terminalContent = document.getElementById('terminalContent');
            const promptInput = document.getElementById('promptInput');
            
            const commands = {
                'aide': 'Affiche la liste des commandes disponibles.',
                'ai': 'Génère du contenu avec l\'IA. Usage: ai "prompt"',
                'analyser': 'Analyse un texte. Usage: analyser "texte" [--type sentiment|summary|entities]',
                'rechercher': 'Recherche sur internet. Usage: rechercher "requête" [--limit nombre]',
                'ping': 'Envoie des requêtes ping. Usage: ping exemple.com [--count nombre]',
                'http': 'Envoie une requête HTTP. Usage: http https://exemple.com [--method GET|POST]',
                'système': 'Affiche des informations système. Usage: système [--type cpu|memory|disk|network|all]',
                'code': 'Génère du code. Usage: code "description" [--language python|javascript|etc]',
                'clear': 'Efface le contenu du terminal.'
            };
            
            function addResponse(text) {
                const responseElement = document.createElement('div');
                responseElement.className = 'response';
                responseElement.textContent = text;
                terminalContent.appendChild(responseElement);
                terminalContent.scrollTop = terminalContent.scrollHeight;
            }
            
            function addCommand(command) {
                const commandElement = document.createElement('div');
                commandElement.className = 'command-line';
                commandElement.innerHTML = `<span class="prompt-symbol">$</span> ${command}`;
                terminalContent.appendChild(commandElement);
            }
            
            function executeCommand(command) {
                addCommand(command);
                
                if (command === 'aide') {
                    let helpText = 'Commandes disponibles :\n\n';
                    for (const [cmd, desc] of Object.entries(commands)) {
                        helpText += `${cmd.padEnd(12)} - ${desc}\n`;
                    }
                    addResponse(helpText);
                } else if (command === 'clear') {
                    terminalContent.innerHTML = '';
                } else if (command.startsWith('ai ')) {
                    const prompt = command.substring(3).trim();
                    if (prompt) {
                        addResponse('Génération en cours...');
                        
                        fetch('/api/generate', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ prompt: prompt }),
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.error) {
                                addResponse(`Erreur: ${data.error}`);
                            } else {
                                addResponse(data.result);
                            }
                        })
                        .catch(error => {
                            addResponse(`Erreur: ${error.message}`);
                        });
                    } else {
                        addResponse('Erreur: Aucun prompt fourni. Usage: ai "prompt"');
                    }
                } else if (command.startsWith('analyser ')) {
                    const parts = command.substring(9).trim().split(/\s+--type\s+/);
                    const text = parts[0].trim();
                    const type = parts.length > 1 ? parts[1].trim() : 'sentiment';
                    
                    if (text) {
                        addResponse('Analyse en cours...');
                        
                        fetch('/api/analyze', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ text: text, type: type }),
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.error) {
                                addResponse(`Erreur: ${data.error}`);
                            } else {
                                if (type === 'sentiment') {
                                    let result = `Sentiment: ${data.sentiment}\n`;
                                    result += `Score: ${data.score}\n`;
                                    result += `Explication: ${data.explanation}`;
                                    if (data.offline_mode) {
                                        result += "\n\nNote: Analyse effectuée en mode hors ligne avec une précision limitée.";
                                    }
                                    addResponse(result);
                                } else if (type === 'summary') {
                                    addResponse(data.summary);
                                } else if (type === 'entities') {
                                    let result = "Entités extraites:\n\n";
                                    for (const [category, entities] of Object.entries(data.entities)) {
                                        if (entities.length > 0) {
                                            result += `${category}: ${entities.join(', ')}\n`;
                                        }
                                    }
                                    if (data.offline_mode) {
                                        result += "\n\nNote: Extraction effectuée en mode hors ligne avec une précision limitée.";
                                    }
                                    addResponse(result);
                                } else {
                                    addResponse(JSON.stringify(data, null, 2));
                                }
                            }
                        })
                        .catch(error => {
                            addResponse(`Erreur: ${error.message}`);
                        });
                    } else {
                        addResponse('Erreur: Aucun texte fourni. Usage: analyser "texte" [--type sentiment|summary|entities]');
                    }
                } else if (command.startsWith('système')) {
                    const parts = command.split(/\s+--type\s+/);
                    const type = parts.length > 1 ? parts[1].trim() : 'all';
                    
                    addResponse('Récupération des informations système...');
                    
                    fetch(`/api/system?type=${type}`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.error) {
                            addResponse(`Erreur: ${data.error}`);
                        } else {
                            let result = "Informations système:\n\n";
                            if (type === 'all') {
                                // Afficher toutes les informations
                                result += "CPU:\n";
                                result += `  Utilisation: ${data.cpu.percent}%\n`;
                                result += `  Cœurs: ${data.cpu.cores}\n\n`;
                                
                                result += "Mémoire:\n";
                                result += `  Total: ${data.memory.total}\n`;
                                result += `  Utilisée: ${data.memory.used} (${data.memory.percent}%)\n\n`;
                                
                                result += "Disque:\n";
                                result += `  Total: ${data.disk.total}\n`;
                                result += `  Utilisé: ${data.disk.used} (${data.disk.percent}%)\n\n`;
                                
                                result += "Réseau:\n";
                                for (const [interface, stats] of Object.entries(data.network)) {
                                    result += `  ${interface}: ${stats.address}\n`;
                                }
                            } else {
                                // Afficher les informations spécifiques
                                result += JSON.stringify(data, null, 2);
                            }
                            addResponse(result);
                        }
                    })
                    .catch(error => {
                        addResponse(`Erreur: ${error.message}`);
                    });
                } else if (command.startsWith('ping ')) {
                    const parts = command.split(/\s+/);
                    const host = parts[1];
                    let count = 4;
                    
                    // Rechercher l'option --count
                    for (let i = 2; i < parts.length - 1; i++) {
                        if (parts[i] === '--count' || parts[i] === '-c') {
                            count = parseInt(parts[i+1]);
                            break;
                        }
                    }
                    
                    if (host) {
                        addResponse(`Envoi de ${count} requêtes ping à ${host}...`);
                        
                        fetch('/api/network/ping', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ host: host, count: count }),
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.error) {
                                addResponse(`Erreur: ${data.error}`);
                            } else {
                                let result = `Ping vers ${host}:\n\n`;
                                
                                // Afficher chaque résultat individuel
                                data.results.forEach((ping, index) => {
                                    if (ping.success) {
                                        result += `${index+1}: ${ping.time} ms\n`;
                                    } else {
                                        result += `${index+1}: Timeout\n`;
                                    }
                                });
                                
                                // Afficher le résumé
                                result += `\nRésumé: ${data.summary.success}/${data.summary.total} paquets reçus, `;
                                result += `${data.summary.loss_percent}% de perte\n`;
                                
                                if (data.summary.success > 0) {
                                    result += `Temps min/moy/max: ${data.summary.min_time}/${data.summary.avg_time}/${data.summary.max_time} ms`;
                                }
                                
                                addResponse(result);
                            }
                        })
                        .catch(error => {
                            addResponse(`Erreur: ${error.message}`);
                        });
                    } else {
                        addResponse('Erreur: Aucun hôte fourni. Usage: ping exemple.com [--count nombre]');
                    }
                } else if (command.startsWith('http ')) {
                    const parts = command.substring(5).trim().split(/\s+--method\s+/);
                    const url = parts[0].trim();
                    const method = parts.length > 1 ? parts[1].trim() : 'GET';
                    
                    if (url) {
                        addResponse(`Envoi d'une requête ${method} à ${url}...`);
                        
                        fetch('/api/network/http', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ url: url, method: method }),
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.error) {
                                addResponse(`Erreur: ${data.error}`);
                            } else {
                                let result = `Requête ${method} vers ${url}:\n\n`;
                                result += `Status: ${data.status_code} ${data.status_text}\n\n`;
                                
                                result += "En-têtes:\n";
                                for (const [key, value] of Object.entries(data.headers)) {
                                    result += `${key}: ${value}\n`;
                                }
                                
                                result += "\nContenu (première partie):\n";
                                // Limiter la taille de l'affichage du contenu
                                const contentPreview = data.content.substring(0, 500);
                                result += contentPreview;
                                
                                if (data.content.length > 500) {
                                    result += "\n\n[Contenu tronqué...]";
                                }
                                
                                addResponse(result);
                            }
                        })
                        .catch(error => {
                            addResponse(`Erreur: ${error.message}`);
                        });
                    } else {
                        addResponse('Erreur: Aucune URL fournie. Usage: http https://exemple.com [--method GET|POST]');
                    }
                } else if (command.startsWith('code ')) {
                    const parts = command.substring(5).trim().split(/\s+--language\s+/);
                    const description = parts[0].trim();
                    const language = parts.length > 1 ? parts[1].trim() : 'python';
                    
                    if (description) {
                        addResponse(`Génération de code ${language} en cours...`);
                        
                        fetch('/api/generate', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ 
                                prompt: `Génère du code ${language} pour la tâche suivante. Retourne uniquement le code, sans explication:\n\n${description}` 
                            }),
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.error) {
                                addResponse(`Erreur: ${data.error}`);
                            } else {
                                addResponse(`Code ${language}:\n\n${data.result}`);
                            }
                        })
                        .catch(error => {
                            addResponse(`Erreur: ${error.message}`);
                        });
                    } else {
                        addResponse('Erreur: Aucune description fournie. Usage: code "description" [--language python|javascript|etc]');
                    }
                } else {
                    addResponse('Commande non reconnue. Tapez "aide" pour voir la liste des commandes disponibles.');
                }
            }
            
            promptInput.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    const command = promptInput.value.trim();
                    if (command) {
                        executeCommand(command);
                        promptInput.value = '';
                    }
                }
            });
        });
    </script>
</body>
</html>